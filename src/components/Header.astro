---
import { Navigation } from "./Navigation.jsx";
import { SelectLanguage } from "./SelectLanguage.jsx";
import { ModeToggle } from "./ModeToggle.tsx";
import { NavigationDialog } from "./NavigationDialog.jsx";

import { languages } from "../utils/langs.js";
import { useStoryblokApi } from "@storyblok/astro";

const { langSwitch, language } = Astro.props;
const storyblokApi = useStoryblokApi();
const { data } = await storyblokApi.get("cdn/stories/config", {
  version: "draft",
  resolve_links: "url",
  language,
});
const headerMenu = data?.story?.content?.header_menu;

// TODO: link properly to "/" index page, currently links to "/home" instead
---

<header class="min-h-24 flex items-center">
  <NavigationDialog headerMenu={headerMenu}, language={language}, languages={languages}, langSwitch={langSwitch} client:idle />
</header>
