---
import { NavigationDialog } from "./NavigationDialog.jsx";
import isPreview from "@/utils/isPreview";

import { languages } from "../utils/langs.js";
import { useStoryblokApi } from "@storyblok/astro";

const { langSwitch, language } = Astro.props;
const storyblokApi = useStoryblokApi();
const { data } = await storyblokApi.get("cdn/stories/navbar-config", {
  version: isPreview() ? "draft" : "published",
  resolve_links: "url",
  language,
});
const headerMenu = data?.story?.content?.items;
---

<header class="min-h-24 flex items-center">
  <NavigationDialog headerMenu={headerMenu}, languages={languages}, langSwitch={langSwitch} client:idle />
</header>
