---
import { storyblokEditable, renderRichText } from "@storyblok/astro";
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";

const { language, blok } = Astro.props;
const renderedRichText = renderRichText(blok.description);
---

<article {...storyblokEditable(blok)}>
  <!-- <div class="content-wrapper"> -->
    <div class="smol-css-grid">
    <!-- <div class="image-wrapper" style="max-width:20rem;"> -->
    <div>
      <img src={blok.image.filename} />
    </div>
    <div>
      <h1>
        {blok.name}
      </h1>
      <p class="item-title">{blok.gender_title}</p>
      <p>
        {blok.gender}
      </p>
      <p class="item-title">{blok.birthdate_title}</p>
      <p>
        {blok.birthdate.slice(0, 10)}
      </p>
      {
        blok.price.trim().length !== 0 && (
          <>
            <p class="item-title">{blok.price_title}</p>
            <p>{blok.price}</p>
          </>
        )
      }
    </div>
  </div>
  {
    renderedRichText?.trim().length !== 0 && (
      <>
        <p class="item-title">{blok.description_title}</p>
        <div set:html={renderedRichText} />
      </>
    )
  }
  <ul role="list">
    {
      blok.parents?.map((blok) => (
        <li>
          <StoryblokComponent language={language} blok={blok} />
        </li>
      ))
    }
  </ul>
  <ul class="gallery-wrapper" role="list">
    {
      blok.gallery?.map((image) => (
        <li class="image-wrapper">
          <img src={image.filename} />
        </li>
      ))
    }
  </ul>
</article>

<style>
  .smol-css-grid {
    --min: 25ch;
    --gap: 1rem;

    display: grid;
    grid-gap: var(--gap);
    /* min() with 100% prevents overflow
  in extra narrow spaces */
    grid-template-columns: repeat(auto-fit, minmax(min(100%, var(--min)), 1fr));
  }
</style>
