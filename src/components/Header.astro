---
import { NavigationMenu } from "./NavigationMenu.jsx";
import isPreview from "@/utils/isPreview.ts";

import { languages } from "../utils/langs.ts";
import { useStoryblokApi } from "@storyblok/astro";

const { langSwitch, language } = Astro.props;
const storyblokApi = useStoryblokApi();
const { data } = await storyblokApi.get("cdn/stories/navbar-config", {
  version: isPreview() ? "draft" : "published",
  resolve_links: "url",
  language,
});
const headerMenu = data?.story?.content?.items;
---

<header class="min-h-40 flex gap-4 items-center justify-between">
  <NavigationMenu headerMenu={headerMenu}, languages={languages}, langSwitch={langSwitch} client:load />
</header>